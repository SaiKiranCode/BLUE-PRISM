<process name="EnvLockingObject" version="1.0" bpversion="5.0.30.0" narrative="dt" type="object" runmode="Exclusive" preferredid="287872b3-8a93-4d72-8adb-32d5c647c2d7">
  <appdef>
    <element name="Application Root">
      <id>e43e8982-4352-4e5c-be2d-8c9d74a7be7e</id>
      <type>Application</type>
      <basetype>Application</basetype>
      <datatype>unknown</datatype>
      <diagnose>False</diagnose>
    </element>
  </appdef>
  <view>
    <camerax>0</camerax>
    <cameray>0</cameray>
    <zoom version="2">1.25</zoom>
  </view>
  <preconditions />
  <endpoint narrative="" />
  <subsheet subsheetid="b8fc95b9-7bb6-4095-b897-559f033b6097" type="CleanUp" published="True">
    <name>Clean Up</name>
    <view>
      <camerax>0</camerax>
      <cameray>0</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <subsheet subsheetid="f4ac33f8-3b5c-4337-9527-43b0be4e013b" type="Normal" published="False">
    <name>Action 1</name>
    <view>
      <camerax>0</camerax>
      <cameray>0</cameray>
      <zoom version="2">1.25</zoom>
    </view>
  </subsheet>
  <stage stageid="39a7e3b2-d3d9-48c9-933f-9f52cafa26ec" name="Start" type="Start">
    <loginhibit />
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>-105</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>887ac66b-39e5-49bb-a630-875802d593b7</onsuccess>
  </stage>
  <stage stageid="887ac66b-39e5-49bb-a630-875802d593b7" name="End" type="End">
    <loginhibit />
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>90</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
  </stage>
  <stage stageid="eba63f03-de3c-437d-8e8a-f70335f4ff4b" name="Stage1" type="ProcessInfo">
    <narrative>
    </narrative>
    <displayx>-195</displayx>
    <displayy>-105</displayy>
    <displaywidth>150</displaywidth>
    <displayheight>90</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <references>
      <reference>System.dll</reference>
      <reference>System.Data.dll</reference>
      <reference>System.Xml.dll</reference>
      <reference>System.Drawing.dll</reference>
    </references>
    <imports>
      <import>System</import>
      <import>System.Drawing</import>
      <import>System.Data</import>
    </imports>
    <language>visualbasic</language>
    <globalcode><![CDATA[]]></globalcode>
    <code><![CDATA[]]></code>
  </stage>
  <stage stageid="5eeae4e6-7b2b-489b-b048-8c62210a585d" name="Clean Up" type="SubSheetInfo">
    <subsheetid>b8fc95b9-7bb6-4095-b897-559f033b6097</subsheetid>
    <narrative>
    </narrative>
    <displayx>-195</displayx>
    <displayy>-105</displayy>
    <displaywidth>150</displaywidth>
    <displayheight>90</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
  </stage>
  <stage stageid="efa084ef-289e-42ce-a2ec-8b3f345ea023" name="Start" type="Start">
    <subsheetid>b8fc95b9-7bb6-4095-b897-559f033b6097</subsheetid>
    <loginhibit />
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>-105</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>f6f79abd-f5bc-4d0c-9416-49f193a44ddd</onsuccess>
  </stage>
  <stage stageid="f6f79abd-f5bc-4d0c-9416-49f193a44ddd" name="End" type="End">
    <subsheetid>b8fc95b9-7bb6-4095-b897-559f033b6097</subsheetid>
    <loginhibit />
    <narrative>
    </narrative>
    <displayx>15</displayx>
    <displayy>90</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
  </stage>
  <stage stageid="6dee4ddb-f023-436f-8192-e08e2b5df6c8" name="Action 1" type="SubSheetInfo">
    <subsheetid>f4ac33f8-3b5c-4337-9527-43b0be4e013b</subsheetid>
    <narrative>
    </narrative>
    <displayx>-195</displayx>
    <displayy>-105</displayy>
    <displaywidth>150</displaywidth>
    <displayheight>90</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
  </stage>
  <stage stageid="37a26cd7-2458-42db-a5ce-33fbfad1ee8d" name="Note1" type="Note">
    <subsheetid>b8fc95b9-7bb6-4095-b897-559f033b6097</subsheetid>
    <narrative>Clean Up Page

This is an optional page where you might choose to perform some finalisation (or "cleanup") tasks as your business object is closed down.

The cleanup action will be called automatically immediately after closing your business object at the end of a business process.

You will not be able to call this action from a business process, nor will it be called at any other time than before the disposal of the business object.</narrative>
    <displayx>-180</displayx>
    <displayy>60</displayy>
    <displaywidth>180</displaywidth>
    <displayheight>230</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
  </stage>
  <stage stageid="8cb144e7-35d8-424b-ba8f-cec3cec196dd" name="Note2" type="Note">
    <narrative>Initialise Page

This is an optional page where you might choose to perform some initialisation tasks after your business object is loaded.

The initialise action will be called automatically immediately after loading your business object.

You will not be able to call this action from a business process, nor will it be called at any other time than after the creation of the object.</narrative>
    <displayx>-180</displayx>
    <displayy>60</displayy>
    <displaywidth>180</displaywidth>
    <displayheight>230</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
  </stage>
  <stage stageid="98e233da-b683-4182-8ce2-7135f07f73e2" name="Start" type="Start">
    <subsheetid>f4ac33f8-3b5c-4337-9527-43b0be4e013b</subsheetid>
    <narrative>
    </narrative>
    <displayx>30</displayx>
    <displayy>-90</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>a66f1b30-6096-49bb-8616-7225038c5660</onsuccess>
  </stage>
  <stage stageid="9527da02-ddc8-4822-8370-1c44bbce28ca" name="End" type="End">
    <subsheetid>f4ac33f8-3b5c-4337-9527-43b0be4e013b</subsheetid>
    <narrative>
    </narrative>
    <displayx>30</displayx>
    <displayy>135</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
  </stage>
  <stage stageid="97851992-072a-4d01-84d0-a8b3448f362a" name="DataList" type="Collection">
    <subsheetid>f4ac33f8-3b5c-4337-9527-43b0be4e013b</subsheetid>
    <narrative>
    </narrative>
    <displayx>-60</displayx>
    <displayy>15</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <datatype>collection</datatype>
    <private />
    <alwaysinit />
    <collectioninfo>
      <field name="Data" type="text" namespace="" />
    </collectioninfo>
    <initialvalue>
      <row>
        <field name="Data" type="text" value="Data 1" />
      </row>
      <row>
        <field name="Data" type="text" value="Data 2" />
      </row>
      <row>
        <field name="Data" type="text" value="Data 3" />
      </row>
      <row>
        <field name="Data" type="text" value="Data 4" />
      </row>
      <row>
        <field name="Data" type="text" value="Data 5" />
      </row>
    </initialvalue>
  </stage>
  <stage stageid="c6d2b50c-2f16-4db8-b543-5641978a8457" name="Loop Start1" type="LoopStart">
    <subsheetid>f4ac33f8-3b5c-4337-9527-43b0be4e013b</subsheetid>
    <narrative>
    </narrative>
    <displayx>30</displayx>
    <displayy>0</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>fda71af1-b334-40e2-ab71-04ac2c8acb97</onsuccess>
    <groupid>dda2c8e6-efea-4052-a28d-ce892b1e4e19</groupid>
    <looptype>ForEach</looptype>
    <loopdata>DataList</loopdata>
  </stage>
  <stage stageid="64dba386-e7db-40ba-b26f-277c2b693ed4" name="Loop End1" type="LoopEnd">
    <subsheetid>f4ac33f8-3b5c-4337-9527-43b0be4e013b</subsheetid>
    <narrative>
    </narrative>
    <displayx>30</displayx>
    <displayy>90</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>5c26629a-81d0-4f6d-be4f-c8a845691f77</onsuccess>
    <groupid>dda2c8e6-efea-4052-a28d-ce892b1e4e19</groupid>
  </stage>
  <stage stageid="fda71af1-b334-40e2-ab71-04ac2c8acb97" name="Write Data" type="Action">
    <subsheetid>f4ac33f8-3b5c-4337-9527-43b0be4e013b</subsheetid>
    <narrative>
    </narrative>
    <displayx>30</displayx>
    <displayy>45</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <inputs>
      <input type="text" name="File Name" narrative="The full path of the text file to append to" expr="&quot;C:\Users\Hello\Desktop\BPMar20198AM\UseCases\EnvLockUseCase\SharedFile.txt&quot;" />
      <input type="text" name="Text" narrative="The text to append to the file" expr="[DataList.Data]" />
    </inputs>
    <outputs>
      <output type="flag" name="Success" narrative="True if successful" stage="" />
      <output type="text" name="Message" narrative="An error message if unsuccessful" stage="" />
    </outputs>
    <onsuccess>64dba386-e7db-40ba-b26f-277c2b693ed4</onsuccess>
    <resource object="Utility - File Management" action="Append to Text File" />
  </stage>
  <stage stageid="a66f1b30-6096-49bb-8616-7225038c5660" name="Query For Lock" type="Action">
    <subsheetid>f4ac33f8-3b5c-4337-9527-43b0be4e013b</subsheetid>
    <narrative>
    </narrative>
    <displayx>135</displayx>
    <displayy>-120</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <inputs>
      <input type="text" name="Name" narrative="The name of the required lock. Mandatory parameter." expr="&quot;DFLock&quot;" />
      <input type="text" name="Token" narrative="The token to check against the lock - if provided, checks if the lock is held by this token, otherwise just checks if the lock is held at all." expr="[FToken]" />
    </inputs>
    <outputs>
      <output type="flag" name="Lock Held" narrative="Flag indicating if the lock is held by the specified token, if one was given, or at all otherwise" stage="Find Lock" />
      <output type="text" name="Comment" narrative="The comment currently set on the lock, regardless of whether the lock is currently held" stage="" />
    </outputs>
    <onsuccess>71a5774d-4364-4dbd-96a9-0c1b8b6ca39f</onsuccess>
    <resource object="BluePrism.AutomateAppCore.clsEnvironmentLockingBusinessObject" action="Query Lock" />
  </stage>
  <stage stageid="71a5774d-4364-4dbd-96a9-0c1b8b6ca39f" name="Is Locked" type="Decision">
    <subsheetid>f4ac33f8-3b5c-4337-9527-43b0be4e013b</subsheetid>
    <narrative>
    </narrative>
    <displayx>120</displayx>
    <displayy>-45</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <decision expression="[Find Lock]" />
    <ontrue>8dfb8e54-adcf-449c-bc29-1093c7502b68</ontrue>
    <onfalse>13644ee0-caa6-4586-81c1-da8ba6197ca3</onfalse>
  </stage>
  <stage stageid="8dfb8e54-adcf-449c-bc29-1093c7502b68" name="Anchor1" type="Anchor">
    <subsheetid>f4ac33f8-3b5c-4337-9527-43b0be4e013b</subsheetid>
    <narrative>
    </narrative>
    <displayx>210</displayx>
    <displayy>-15</displayy>
    <displaywidth>10</displaywidth>
    <displayheight>10</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <onsuccess>a66f1b30-6096-49bb-8616-7225038c5660</onsuccess>
  </stage>
  <stage stageid="13644ee0-caa6-4586-81c1-da8ba6197ca3" name="Acquire Lock" type="Action">
    <subsheetid>f4ac33f8-3b5c-4337-9527-43b0be4e013b</subsheetid>
    <narrative>
    </narrative>
    <displayx>30</displayx>
    <displayy>-45</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <inputs>
      <input type="text" name="Name" narrative="The name of the required lock. Mandatory parameter." expr="&quot;DFLock&quot;" />
      <input type="timespan" name="Timeout" narrative="The maximum amount of time to await the lock. Default is to wait forever" expr="" />
      <input type="text" name="Preferred Token" narrative="The preferred token to use for the lock. Default behaviour is to generate a new unique token." expr="" />
      <input type="text" name="Comment" narrative="The comments to set on the lock" expr="" />
    </inputs>
    <outputs>
      <output type="text" name="Token" narrative="The token registered against the lock. This will be empty if the lock could not be acquired" stage="FToken" />
    </outputs>
    <onsuccess>c6d2b50c-2f16-4db8-b543-5641978a8457</onsuccess>
    <resource object="BluePrism.AutomateAppCore.clsEnvironmentLockingBusinessObject" action="Acquire Lock" />
  </stage>
  <stage stageid="5c26629a-81d0-4f6d-be4f-c8a845691f77" name="Release Lock" type="Action">
    <subsheetid>f4ac33f8-3b5c-4337-9527-43b0be4e013b</subsheetid>
    <narrative>
    </narrative>
    <displayx>120</displayx>
    <displayy>105</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <inputs>
      <input type="text" name="Name" narrative="The name of the specific lock to be released. Default behaviour is to release all locks with the given token." expr="&quot;DFLock&quot;" />
      <input type="text" name="Comment" narrative="The comments to set on the lock(s)" expr="" />
      <input type="text" name="Token" narrative="The token associated with the lock(s) to be released. Mandatory parameter." expr="[FToken]" />
      <input type="flag" name="All Sessions" narrative="True to release locks matching the specified constraints across all sessions; False to only release locks acquired in the current session. Default is False" expr="" />
    </inputs>
    <onsuccess>9527da02-ddc8-4822-8370-1c44bbce28ca</onsuccess>
    <resource object="BluePrism.AutomateAppCore.clsEnvironmentLockingBusinessObject" action="Release Lock" />
  </stage>
  <stage stageid="a92a37f5-6454-449f-a55c-19c436ccff49" name="Find Lock" type="Data">
    <subsheetid>f4ac33f8-3b5c-4337-9527-43b0be4e013b</subsheetid>
    <narrative>
    </narrative>
    <displayx>-105</displayx>
    <displayy>90</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <datatype>flag</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
  <stage stageid="2e06c2f8-55a2-4516-baa5-111935545576" name="FToken" type="Data">
    <subsheetid>f4ac33f8-3b5c-4337-9527-43b0be4e013b</subsheetid>
    <narrative>
    </narrative>
    <displayx>-135</displayx>
    <displayy>45</displayy>
    <displaywidth>60</displaywidth>
    <displayheight>30</displayheight>
    <font family="Segoe UI" size="10" style="Regular" color="000000" />
    <datatype>text</datatype>
    <initialvalue />
    <private />
    <alwaysinit />
  </stage>
</process>